import{r,K as b,c as f,j as i,C as E,L as v,A as _,s as p,U as x,I as C,d as R,x as T,D as A}from"./index-fc391d71.js";function w(e){var t=r.useRef();return r.useEffect(function(){t.current=e}),t.current}function M(){var e=r.useRef(!0);return e.current?(e.current=!1,!0):e.current}var O=function(e,t){var n=M();r.useEffect(function(){if(!n)return e()},t)};const F=O;function L(e){const t=w(e),n=r.useRef({useMount:()=>{},useCreate:()=>{},useRemove:()=>{}});return r.useEffect(()=>{n.current.useMount(e)},[]),F(()=>{const s=[],c=[];Array.from(new Set([...t||[],...e])).forEach(o=>{e.includes(o)&&!(t!=null&&t.includes(o))?s.push(o):!e.includes(o)&&(t!=null&&t.includes(o))&&c.push(o)}),s.length&&n.current.useCreate(s),c.length&&n.current.useRemove(c)},[e]),{useMount:s=>n.current.useMount=s,useCreate:s=>n.current.useCreate=s,useRemove:s=>n.current.useRemove=s}}const g={item:"mo-notification__item"};function I({data:e,onClose:t,onClick:n}){const s=b(),c=f("builtin");return i.jsxs(E,{className:g.item,justifyContent:"space-between",alignItems:"flex-start",onClick:()=>n==null?void 0:n(e),children:[typeof e.render=="function"?e.render(e):e.value,i.jsx(v,{title:s(c.constants.NOTIFICATION_TOOLBAR_CLEAR,"Clear Notification"),onClick:()=>t==null?void 0:t(e),type:"close"})]})}const h={notification:"mo-notification",header:"mo-notification__header",body:"mo-notification__body"};function U({data:e=[],toolbar:t=[],onActionBarClick:n,onCloseNotification:s}){const c=b(),o=f("builtin"),u=e.length>0?c(o.constants.STATUSBAR_ITEM_NOTIFICATION,"Notifications"):c(o.constants.NOTIFICATION_ITEM_EMPTY,"No New Notifications");return i.jsxs("section",{className:h.notification,children:[i.jsxs(E,{className:h.header,justifyContent:"space-between",children:[i.jsx("span",{children:u}),i.jsx(_,{data:t,onClick:n})]}),i.jsx("div",{className:h.body,children:e.map(a=>i.jsx(I,{data:a,onClose:s},a.id))})]})}const B={bell:"mo-notification__bell"};function $({onKeyPress:e,onClick:t,onClickItem:n,onActionBarClick:s,onCloseNotification:c}){const o=f("notification"),N=f("layout"),u=L(o.toasts),{data:a,toolbar:j}=o,y=a.length>0?"bell-dot":"bell";return u.useCreate(l=>{l.forEach(d=>{const m=o.data.find(p(d));m&&x(i.jsx(I,{data:m,onClose:c,onClick:n}),{id:m.id,duration:1/0,unstyled:!0})})}),u.useRemove(l=>{l.forEach(d=>{x.dismiss(d)})}),r.useEffect(()=>(window.addEventListener("keydown",e),()=>{window.addEventListener("keydown",e)}),[]),i.jsxs(i.Fragment,{children:[i.jsx(C,{className:R(B.bell),onClick:t,type:y}),T.createPortal(i.jsx(A,{visible:!N.notification.hidden,children:i.jsx(U,{data:a,toolbar:j,onActionBarClick:s,onCloseNotification:c})}),document.body)]})}export{$ as default};
